<div class="dialog">
      <div class="dialog-container">
            <div class="dialog-heading">
                  <h1 class="dialog-title">{{ formTitle }}</h1>
                  <div class="dialog-close">
                        <button type="button" class="close-button">
                              <span class="text material-icons-outlined" (click)="close()">close</span>
                        </button>
                  </div>
            </div>
            <form class="dialog-body" [formGroup]="form">
                  <div class="dialog-row">
                        <div class="form-input">
                              <input class="" type="text" formControlName="name" autocomplete="on" required/>
                              <label for="name">Tên bước <span style="color: red;">  *</span></label>
                              <div class="error" *ngIf="form.controls.name.touched && form.controls.name.invalid">
                                    <small *ngIf="form.controls.name.errors?.['required']">Tên không được bỏ trống</small>
                              </div>
                        </div>
                  </div>
                  <div class="dialog-row">
                        <kit-dropdown [options]="flowTypeOptions" [placeholder]="'Chọn luồng duyệt'" formControlName="flowType" (selectionChange)="onFlowTypeSelected($event)" [width]="'100%'"></kit-dropdown>
                        <div class="error" *ngIf="form.controls.flowType.touched && form.controls.flowType.invalid">
                              <small *ngIf="form.controls.flowType.errors?.['required']">Phải chọn luồng duyệt</small>
                        </div>
                  </div>
                  <div class="dialog-row" *ngIf="approverMode === 'standard'">
                        <kit-dropdown [options]="(userOptions$ | async) ?? []" 
                              [placeholder]="'Chọn người duyệt'" [multiple]="true" 
                              formControlName="approverIds" (selectionChange)="onApproverSelected($event)" 
                              [width]="'100%'">
                        </kit-dropdown>
                        <div class="error" *ngIf="form.controls.approverIds.touched && form.controls.approverIds.invalid">
                              <small *ngIf="form.controls.approverIds.errors?.['required']">Phải chọn ít nhất 1 người duyệt</small>
                        </div>
                  </div>
                  <div class="dialog-row" *ngIf="approverMode === 'condition'">
                        <kit-dropdown [options]="approverTypeSelection"
                              [placeholder]="'Chọn điều kiện'"
                              (selectionChange)="onApproverTypeSelected($event)">
                        </kit-dropdown>
                  </div>
                  <div class="dialog-row">
                        <div class="form-input">
                              <input class="" type="number" formControlName="slaHours" autocomplete="on" required/>
                              <label for="name">SLA (giờ)</label>
                              <div class="error" *ngIf="form.controls.slaHours.touched && form.controls.slaHours.invalid">
                                    <small *ngIf="form.controls.slaHours.errors?.['min']">
                                          SLA phải ≥ {{ form.controls.slaHours.errors?.['min']?.min }}
                                    </small>
                              </div>
                        </div>
                  </div>
                  <div class="dialog-row">
                        <div class="dialog-buttons">
                              <button type="button" class="width-50pt button cancel-button" (click)="close()">Hủy</button>
                              <button type="button" class="width-50pt button save-button display-flex justify-content-center" (click)="save()">
                                    {{ submitting ? 'Đang lưu...' : 'Lưu' }}
                              </button>
                        </div>
                  </div>
                  <div class="form-summary-error" *ngIf="form.touched && form.invalid">
                        <small>Biểu mẫu chưa hợp lệ, vui lòng kiểm tra các trường được đánh dấu.</small>
                  </div>
            </form>
      </div>
</div>